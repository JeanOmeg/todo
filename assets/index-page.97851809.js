import{T as h,u as b,Q as v,a as d}from"./ToolBar.0797b8c4.js";import{z as T,s as _,o as w,G as x,_ as Q,A as B,B as C,H as P,E as e,D as r,I as $,J as u,L as f}from"./index.bf12d20e.js";import{Q as I,a as z,b as S}from"./QPullToRefresh.83efdbcb.js";import{t as q}from"./tasks.3d35565e.js";import"./QResizeObserver.2a831276.js";import"./axios.cef7f351.js";import"./QSelect.a066692f.js";var D=T({name:"IndexPage",components:{ToolBar:h},setup(){const t=_([]),{listByIdUser:p,remove:g}=q();w(()=>{localStorage.getItem("logout")===null||localStorage.getItem("logout")==="true"?m.push({name:"notFound"}):l()});const k=[{name:"index",label:"#",field:"index",align:"left",sortable:!0},{name:"title",field:"title",label:"Task",align:"left",sortable:!0},{name:"status",field:"status",label:"Status",align:"left",sortable:!0},{name:"created",field:"created",label:"Create",align:"left",sortable:!0},{name:"updated",field:"updated",label:"Update",align:"left",sortable:!0},{name:"actions",field:"actions",label:"Actions",align:"right"}],i=b(),m=x();let o=[],s=[];const l=async a=>{try{const c=await p(a);t.value=c,s=t.value,o=[];for(let n=0;n<s.length;n++)o=o.concat(s[n]);o.forEach((n,y)=>{n.index=++y})}catch(c){console.log(c)}};return{tasks:t,columns:k,deleteTask:async a=>{try{i.dialog({title:"Delete",message:"Do you want to delete this task?",cancel:!0,persistent:!0}).onOk(async()=>{await g(a),l(),i.notify({message:"Deleted",icon:"check",color:"positive"})})}catch{i.notify({message:"Error!",icon:"times",color:"negative"})}},editTask:a=>{m.push({name:"formTask",params:{id:a}})},pagination:_({rowsPerPage:0}),refresh(a){setTimeout(()=>{l(),a()},1e3)}}}});const E=D,R={class:"row justify-center items-center content-center col-12"},A={class:"col-8 q-gutter-sm q-col-gutter-sm"},N=u("div",{class:"row justify-center text-bold text-primary",style:{"font-size":"1.5em"}}," All your tasks ",-1),U=u("span",{class:"text-h5"},"Tasks",-1);function j(t,p,g,k,i,m){const o=B("tool-bar");return C(),P($,null,[e(o),e(v,null,{default:r(()=>[u("div",R,[u("div",A,[e(d),N,e(d),e(I,{onRefresh:t.refresh},{default:r(()=>[e(z,{title:"Tasks",rows:t.tasks,columns:t.columns,"row-key":"index",class:"my-sticky-virtscroll-table"},{top:r(()=>[U,e(d),e(f,{color:"primary",label:"New Task",to:{name:"formTask"},size:"md"})]),"body-cell-actions":r(s=>[e(S,{props:s,class:"q-gutter-sm"},{default:r(()=>[e(f,{icon:"edit",color:"primary",dense:"",size:"sm",onClick:l=>t.editTask(s.row.id)},null,8,["onClick"]),e(f,{icon:"delete",color:"negative",dense:"",size:"sm",onClick:l=>t.deleteTask(s.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1},8,["onRefresh"]),e(d)])])]),_:1})],64)}var W=Q(E,[["render",j]]);export{W as default};
