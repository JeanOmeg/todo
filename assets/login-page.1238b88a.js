import{T as p,u as f,Q as w,a as u}from"./ToolBar.0797b8c4.js";import{z as y,G as b,o as h,s as _,_ as v,A as S,B as P,H as q,E as t,D as m,I as Q,J as i,Q as I,K as c,L as d}from"./index.bf12d20e.js";import{Q as k}from"./QForm.4c0eb010.js";import{api as V}from"./axios.cef7f351.js";import"./QResizeObserver.2a831276.js";function E(o){return{login:async s=>{try{const{data:a}=await V.post(o,s);return a}catch(a){throw new Error(a)}}}}function z(){const{login:o}=E("login");return{login:o}}var B=y({name:"LoginPage",components:{ToolBar:p},setup(){const{login:o}=z(),r=f(),s=b();h(()=>{localStorage.getItem("logout")==="false"&&s.push({name:"home"})});const a=_({email:"",password:""});return{form:a,onSubmit:async()=>{if(!a.value.email||!a.value.password)r.notify({message:"Email and/or Password is required!",icon:"error",color:"negative"});else try{const l={email:a.value.email,password:a.value.password},{data:n}=await o(l);localStorage.userToken=n.token,localStorage.refreshToken=n.refreshToken,localStorage.admin=n.user.admin,localStorage.logout="false",r.notify({message:"Logged!",icon:"check",color:"positive"}),s.push({name:"home"})}catch(l){console.error(l),localStorage.removeItem("admin"),localStorage.removeItem("userToken"),localStorage.removeItem("logout"),s.push({name:"loginPage"}).then(r.notify({message:"Incorrect email or password!",icon:"error",color:"negative"}))}}}}});const T=B,$={class:"row justify-center items-center content-center col-12"},C={class:"col-4 q-gutter-sm q-col-gutter-sm"},L=i("div",{class:"row justify-center text-bold text-primary",style:{"font-size":"1.5em"}}," Access your account ",-1),j={class:"row justify-between"};function x(o,r,s,a,g,l){const n=S("tool-bar");return P(),q(Q,null,[t(n),t(w,null,{default:m(()=>[i("div",$,[i("div",C,[t(u),L,t(u),t(I,{bordered:"",class:"q-pa-md"},{default:m(()=>[t(k,{onSubmit:o.onSubmit,class:"q-gutter-md"},{default:m(()=>[t(c,{square:"",filled:"",clearable:"",modelValue:o.form.email,"onUpdate:modelValue":r[0]||(r[0]=e=>o.form.email=e),type:"email",label:"Email","lazy-rules":"ondemand",rules:[e=>e&&e.length>0||"Email is required. Email cannot be empty!",e=>e&&e.length<81||"Invalid email!"],"hide-bottom-space":""},null,8,["modelValue","rules"]),t(c,{square:"",filled:"",clearable:"",modelValue:o.form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>o.form.password=e),type:"password",label:"Password","lazy-rules":"ondemand",rules:[e=>e&&e.length>0||"Password is required. Password cannot be empty!",e=>e&&e.length<50||"Invalid password!"],"hide-bottom-space":""},null,8,["modelValue","rules"]),i("div",j,[t(d,{size:"md",label:"Create",color:"negative","text-color":"white",to:{name:"registerPage"}}),t(d,{label:"Login",color:"primary",type:"submit",size:"md"})])]),_:1},8,["onSubmit"])]),_:1})])])]),_:1})],64)}var G=v(T,[["render",x]]);export{G as default};
